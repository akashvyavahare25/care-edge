<span>
  <label class="hover-text" (click)="Navigate()">
    <p>&larr;Rating Model</p>
  </label>
</span>
<div class="card col-md-12 mt-3" >
  <!-- <p-tabView [(activeIndex)]="activeIndex"  >
      
      
        <p-tabPanel *ngFor="let tab of items" [header]="tab.data.name" [hidden]="tab.data.hide === true">
            <p>{{ tab.data.name }} {{tab.data.hide}}</p>
        </p-tabPanel>
        
    </p-tabView> -->

  <p-tabView [(activeIndex)]="activeIndex" (onChange)="onTabChange($event)"  >

    <ng-template ngFor let-tab [ngForOf]="items"  >
     
      <p-tabPanel *ngIf="tab.data.hide === true" [header]="tab.data.name" >
        <!-- <ng-template pTemplate="header">
          {{ tab.data.name }}
        </ng-template> -->
        <ng-container *ngIf="selectedTabData && selectedTabData === tab.data" >
        <div
          class="card"
          [style]="{margin: '5px', height: '650px','overflow-y': 'auto','border':'none'}"
          *ngIf="tab.children && tab.children.length > 0"
        >
          <div
            *ngFor="let child of tab.children"
            [ngStyle]="{ 'margin-top': '20px' }"
          >
            <ul *ngIf="child.data.type === 'container'">
              <span *ngIf="child.data.hide === true">
                <li [ngStyle]="{ border: 'solid', 'border-width': '0.2px' }">
                  {{ child.data.name }}
                </li>
              </span>
            </ul>

            <!-- <table id="myTable"  
              *ngIf="child.data.type === 'table' && child.data.hide === true"
            > -->
            <p-table [value]="[child.data.data[0]]" styleClass="p-datatable-gridlines" *ngIf="child.data.type === 'table' && child.data.hide === true">
              <ng-template pTemplate="header">
                <tr>
                <th
                  [style]="{ 'text-align':'center','background-color':'white' }"
                  [attr.colspan]="child.data.column"
                >
                  {{ child.data.name }}
                </th>
              </tr>
                <tr
                  class="rowdata"
                  *ngIf="child.data.mergecol.length !== 0"
                >
                  <th
                    *ngFor="let column of child.data.mergecol"
                    [attr.colspan]="column.mergecheckboxCount"
                 
                  [ngStyle]="{'text-align':'center',
                  'background-color': child.data.data[0]?.columns[0]?.bgColor?child.data.data[0].columns[0].bgColor:child.data.data[0].property.RowBackGroundcolour,
                  color: child.data.data[0]?.columns[0]?.textColor?child.data.data[0].columns[0].textColor:child.data.data[0].property.RowFontcolour

                }"
                  >
                    {{ column.columnName}}
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body">
                <ng-container *ngFor="let row of child.data.data; let i = index">
                  <tr
                    class="rowdata"
                    [ngStyle]="{
                      'background-color': row.property.RowBackGroundcolour ? row.property.RowBackGroundcolour : '#ffffff',
                      'color': row.property.RowFontcolour ? row.property.RowFontcolour : '#000000'
                    }"
                    [attr.id]="'tr' + (i + 1)"
                    #tableRow
                  >
                    <ng-container *ngFor="let column of row.columns; let j = index">
                      <td
                        [id]="'myDynamicId-' + i + j"
                        class="datarow"
                        [ngStyle]="{
                          'font-size': row.property.Fontsize,
                          'font-weight': row.property.Fontweight,
                          'font-style': row.property.Fontstyle,
                          'text-transform': row.property.textTransform,
                          'background-color': column.bgColor,
                          color: column.textColour
                        }"
                      >
                        <label htmlFor="username" [style]="{ 'margin-left': '25px' }">{{ column.title }}</label>
                        <input
                          *ngIf="
                            column.colType !== undefined &&
                            column.colType !== null &&
                            column.colType !== '' &&
                            column.colType !== 'label' &&
                            column.colType !== 'dropdown' &&
                            column.colType !== 'checkbox' &&
                            column.colType !== 'radio'
                          "
                          (change)="onchangevalue($event, i, j, row.columns, column, row.columns[0])"
                          [type]="column.colType"
                          [ngStyle]="{
                            'margin-left': '20px',
                            'width': '80%',
                            'margin-right': '10px',
                            'border-color': 'lightgray'
                          }"
                        />
                        <div *ngIf="column.colType === null || column.colType === ''"></div>
                        <p-dropdown *ngIf="column.colType === 'dropdown'" [options]="column.checkboxvalid" [style]="{ 'width': '200px' }"></p-dropdown>
                        <ng-container *ngIf="column.colType === 'checkbox' || column.colType === 'radio'">
                          <div *ngFor="let option of column.checkboxvalid">
                            <label>{{ option.Label }}</label>
                            <input type="radio" *ngIf="column.colType === 'radio'" />
                            <input type="checkbox" *ngIf="column.colType === 'checkbox'" />
                          </div>
                        </ng-container>
                      </td>
                    </ng-container>
                  </tr>
                </ng-container>
            
                <tr class="rowdata" *ngIf="child.data.total === true">
                  <td class="datarow" *ngFor="let col of child.data.data[0].columns">
                    <div *ngIf="col.id === 1">
                      <label>Total</label>
                    </div>
                    <div *ngIf="col.id !== 1">
                      <input
                        type="text"
                        pInputText
                        *ngIf="col?.columntotal"
                        [value]="col.columntotal"
                        [ngStyle]="{ 'margin-left': '10px', 'height': '30px', 'width': '90%' }"
                        readonly
                      />
                    </div>
                  </td>
                </tr>
            
                <tr class="rowdata" *ngIf="child.data.score === true">
                  <td class="datarow" *ngFor="let col of child.data.data[0].columns">
                    <div *ngIf="col.id === 1">
                      <label>Score</label>
                    </div>
                    <div *ngIf="col.id !== 1">
                      <input
                        type="text"
                        pInputText
                        *ngIf="col?.score"
                        [value]="col.score"
                        [ngStyle]="{ 'margin-left': '10px', 'height': '30px', 'width': '90%' }"
                        readonly
                      />
                    </div>
                  </td>
                </tr>
            
                <tr class="rowdata" *ngIf="child.data.factor === true">
                  <td class="datarow" *ngFor="let col of child.data.data[0].columns">
                    <div *ngIf="col.id === 1">
                      <label>Factor</label>
                    </div>
                    <div *ngIf="col.id !== 1">
                      <input
                        type="text"
                        pInputText
                        *ngIf="col?.factor"
                        [value]="col.factor"
                        [ngStyle]="{ 'margin-left': '10px', 'height': '30px', 'width': '90%' }"
                        readonly
                      />
                    </div>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
          </div>
        </ng-container>
        <!-- <p>{{ tab.data.name }}</p> -->
      </p-tabPanel>
 
    </ng-template>
  
  </p-tabView>
</div>
